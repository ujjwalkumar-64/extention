<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>PageGenie</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="popup.css" />
</head>
<body>
<div id="app">
    <header class="pg-header">
        <div class="pg-title">
            <span class="pg-logo" aria-hidden="true">üßû</span>
            <span>PageGenie</span>
        </div>
        <div id="authBadge" class="pg-badge" aria-live="polite">Signed out</div>
    </header>

    <div id="status" class="pg-status" hidden></div>

    <!-- Auth: Signed-out -->
    <section id="authAnon" class="card" aria-label="Authentication - Sign in or Sign up">
        <div class="section-title">Sign in</div>
        <form id="loginForm" class="form-grid">
            <label>
                <span class="lbl">Username</span>
                <input id="loginUsername" type="text" autocomplete="username" required />
            </label>
            <label>
                <span class="lbl">Password</span>
                <input id="loginPassword" type="password" autocomplete="current-password" required />
            </label>
            <button id="loginBtn" type="submit" class="pg-btn primary">Log in</button>
        </form>

        <div class="divider" role="separator" aria-label="or"><span>or</span></div>

        <div id="signupWrap">
            <div class="section-title">Create an account</div>
            <form id="signupForm" class="form-grid">
                <label>
                    <span class="lbl">Full name</span>
                    <input id="signupFullName" type="text" autocomplete="name" required />
                </label>
                <label>
                    <span class="lbl">Username</span>
                    <input id="signupUsername" type="text" autocomplete="username" required />
                </label>
                <label>
                    <span class="lbl">Password</span>
                    <input id="signupPassword" type="password" autocomplete="new-password" required />
                </label>
                <button id="signupBtn" type="submit" class="pg-btn">Sign up</button>
            </form>
        </div>
    </section>

    <!-- Auth: Signed-in -->
    <section id="authUser" class="card" hidden aria-label="Account actions">
        <div class="section-title">Account</div>
        <div class="row">
            <div id="welcome" class="welcome">Welcome!</div>
        </div>
        <div class="row gap">
            <button id="readingModeBtn" class="pg-btn" aria-label="Open reading mode">Open Reading Mode</button>
            <button id="openHubBtn" class="pg-btn" aria-label="Open library">Open Library</button>
            <button id="logoutBtn" class="pg-btn danger" aria-label="Log out">Log out</button>
        </div>
    </section>

    <!-- Settings -->
    <section class="card" aria-label="Settings">
        <div class="section-title">Settings</div>
        <div class="settings-grid">
            <label class="w100">
                <span class="lbl">Mode</span>
                <select id="mode" class="pg-select" aria-label="AI mode">
                    <option value="auto">Auto (prefer on-device, fallback online)</option>
                    <option value="offline-only">Offline only (on-device required)</option>
                    <option value="online-only">Online only (always use backend)</option>
                </select>
            </label>

            <label class="toggle">
                <input id="toggleSelection" type="checkbox" />
                <span>Show toolbar on selection</span>
            </label>

            <label class="toggle">
                <input id="toggleFloatingButton" type="checkbox" />
                <span>Show floating button (always visible)</span>
            </label>

            <!-- Theme -->
            <label class="w100">
                <span class="lbl">Theme</span>
                <select id="theme" class="pg-select" aria-label="Theme">
                    <option value="system">System</option>
                    <option value="dark">Dark</option>
                    <option value="light">Light</option>
                </select>
            </label>

            <!-- Persona presets -->
            <label class="w100">
                <span class="lbl">Persona preset</span>
                <select id="personaPreset" class="pg-select" title="Tailor prompts for a persona" aria-label="Persona preset">
                    <option value="general">General</option>
                    <option value="student">Student</option>
                    <option value="researcher">Researcher</option>
                    <option value="editor">Editor</option>
                </select>
            </label>

            <!-- Cite sources -->
            <label class="toggle">
                <input id="citeSources" type="checkbox" />
                <span>Prefer citing sources when available</span>
            </label>

            <label class="w100">
                <span class="lbl">Target language</span>
                <select id="targetLang" class="pg-select" aria-label="Target language">
                    <option value="en">English (en)</option>
                    <option value="hi">Hindi (hi)</option>
                    <option value="es">Spanish (es)</option>
                    <option value="fr">French (fr)</option>
                    <option value="de">German (de)</option>
                    <option value="zh">Chinese (zh)</option>
                    <option value="ja">Japanese (ja)</option>
                    <option value="ko">Korean (ko)</option>
                    <option value="pt">Portuguese (pt)</option>
                    <option value="ru">Russian (ru)</option>
                    <option value="ar">Arabic (ar)</option>
                    <option value="it">Italian (it)</option>
                    <option value="bn">Bengali (bn)</option>
                    <option value="pa">Punjabi (pa)</option>
                    <option value="mr">Marathi (mr)</option>
                    <option value="te">Telugu (te)</option>
                    <option value="ta">Tamil (ta)</option>
                    <option value="ur">Urdu (ur)</option>
                    <option value="gu">Gujarati (gu)</option>
                </select>
            </label>
        </div>
    </section>

    <!-- About -->
    <section class="card" aria-label="About PageGenie">
        <div class="section-title">About PageGenie</div>
        <p class="muted">
            PageGenie is your on‚Äëdevice reading copilot. It summarizes, explains, translates, rewrites, and
            proofreads right on the page. It prefers fast, private on‚Äëdevice AI and transparently falls back to
            cloud when needed ‚Äî keeping you informed the whole way.
        </p>
        <ul class="muted">
            <li><strong>On‚Äëdevice first</strong>: Chrome AI Task APIs for privacy and speed; <em>cloud fallback</em> when a page or action requires it.</li>
            <li><strong>Automatic sources</strong>: Preserves citations from the model. If missing, adds 3‚Äì5 references via web search (‚Äú‚Äî found by search‚Äù).</li>
            <li><strong>Quick actions</strong> (selection toolbar &amp; FAB):
                Summarize <kbd>Alt</kbd>+<kbd>Shift</kbd>+<kbd>S</kbd>,
                Explain <kbd>Alt</kbd>+<kbd>Shift</kbd>+<kbd>E</kbd>,
                Rewrite <kbd>Alt</kbd>+<kbd>Shift</kbd>+<kbd>R</kbd>,
                Translate <kbd>Alt</kbd>+<kbd>Shift</kbd>+<kbd>T</kbd>.
                Move the floating button with <kbd>‚Üë</kbd><kbd>‚Üì</kbd><kbd>‚Üê</kbd><kbd>‚Üí</kbd>; press <kbd>Esc</kbd> to close panels.
            </li>
            <li><strong>Library</strong>: Save Notes, browse curated Suggestions, and resume Quizzes ‚Äî open via ‚ÄúOpen Library‚Äù.</li>
            <li><strong>Reader</strong>: Distraction‚Äëfree view for long pages and PDFs ‚Äî open via ‚ÄúOpen Reading Mode‚Äù.</li>
            <li><strong>Settings</strong>: Mode (Auto / Offline‚Äëonly / Online‚Äëonly), Theme (System / Light / Dark), Persona, Target language, and ‚ÄúCite sources‚Äù.</li>
            <li><strong>Footer tip</strong> in results:
                Tip: On‚Äëdevice when available; falls back to cloud. Used: <em>On‚Äëdevice/Cloud</em> ‚Ä¢
                <a href="#" title="Why cloud?">Why cloud?</a>
            </li>
            <li><strong>Privacy</strong>: Content stays on your device whenever possible; cloud is used only when necessary and called out in the UI.</li>
        </ul>
        <p class="muted small">
            New here? <a href="../pages/onboarding.html" target="_blank" rel="noreferrer noopener">Take the 60‚Äësecond tour</a>.
            Learn more in our <a href="https://github.com/ujjwalkumar-64/extention#readme" target="_blank" rel="noreferrer noopener">README</a>.
        </p>
    </section>
</div>

<script src="popup.js"></script>
</body>
</html>